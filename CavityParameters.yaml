---
# we make a list of cavities with various properties
# To define a new cavity, we go the the next line , indent 2 spaces, adding a - , and then type the name of the cavity
# On the immediate next line, indenting by 2 spaces and specifying it's type
# The possible types are
#   - "active"
#   - "passive"

# active is where you assume that the cavity is beam-loading compensated (ie. phase and amplitude of cavity are not coupled. Generator amplitude and phase are such that you get a constant max voltage and synchronous phase in the cavity)

# passive is when there is no external generator associated with the cavity, only induced voltage from the beam. You can't compensate the beam here

# Afterwards, you need to specify numerical values of the parameters needed to define the voltage of the cavity
# all parameters need to be indented 2 spaces with respect to the cavity name

# For an active configuration, you need:
#  - r: relative voltage with respect to V_rf
#  - Phase: initial phase of voltage (in degrees)
#  - order: the order of the cavity

# For a passive configuration, you need:
#  - shunt impedance
#  - Quality Factor
#  - detuning frequency
#  - order of cavity

# Below is an example defining the main cavity. This is an active cavity of order 1 with r=1 with sin(Phi) equal to the energy loss per turn
cavities:
  - name:  'main'
    type: "active"
    r: 1 # relative voltage (1 means same as mains voltage)
    order: 1
    Phase: 17 # Modify as needed to match energy loss per turn (U/(V_rf) where U is in units of eV)
   # For a passive cavity, we swap relative voltage for shunt impedance
  - name:  'hhc1'
    type: "passive"
    shunt: 9.02d6 # shunt impedence in Ohms
    quality: 1d6 # unitless
    detuning: 4.5d4 # frequency in Hz
    order: 3
  - name:  'hhc2'
    type: "active"
    r: -0.5 # this means that the voltage is half the value of mains and opposite in signage
    order: 2
    Phase: 80.22